var Gradiator=function(){var a,b=this,c=[],d=[],e=window.getComputedStyle(document.documentElement,""),f=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];this.addResizeHandler=function(){window.attachEvent?window.attachEvent("onresize",function(){b.resizeGrad()}):window.addEventListener&&window.addEventListener("resize",function(){b.resizeGrad()},!0)},this.resizeGrad=function(e){clearTimeout(a),a=setTimeout(function(){for(;c.length>0;){var a=c.shift();a.canvas.parentNode.removeChild(a.canvas),a.elem.style.display=a.display}for(var e=0;e<d.length;e++)b.gradiate(d[e].selector,d[e].topColor,d[e].botColor,d[e].attemptCSS,!1)},250)},this.gradiate=function(a,b,e,g,h){h="undefined"!=typeof h?h:!0,g="undefined"!=typeof g?g:!0;var i=document.createElement("canvas");if(i.getContext&&i.getContext("2d")){h&&d.push({selector:a,topColor:b,botColor:e,attemptCSS:g});var j=[],k=a.substring(0,1);if(a=a.substr(1),"."===k)j=document.getElementsByClassName(a);else{if("#"!==k)return;j.push(document.getElementById(a))}for(var l=0;l<j.length;l++){var m=j[l];if("webkit"===f&&g)m.style.background="-webkit-linear-gradient("+b+", "+e+")",m.style.webkitBackgroundClip="text",m.style.webkitTextFillColor="transparent";else{var n=m.parentNode,o=window.getComputedStyle(m,null),p=document.createElement("canvas");if(ctx=p.getContext("2d"),dpr=window.devicePixelRatio||1,backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1,ratio=dpr/backingStoreRatio,cWidth=m.offsetWidth,cHeight=m.offsetHeight,cFontSize=parseInt(o.fontSize,10),cTopOffset=cHeight-cFontSize-parseInt(o.paddingTop,10)-parseInt(o.paddingBottom,10),startLeft=parseInt(o.paddingLeft,10),stopLeft=parseInt(o.paddingRight,10)+parseInt(o.width,10),startTop=parseInt(o.paddingTop,10)+cTopOffset,stopTop=parseInt(o.fontSize,10)+startTop,grad=ctx.createLinearGradient(startLeft,startTop,startLeft,stopTop),gradCanvasObj={canvas:p,elem:m,display:o.getPropertyValue("display")},c.push(gradCanvasObj),"center"===o.textAlign?startLeft=cWidth/2:"right"===o.textAlign&&(startLeft=stopLeft),m.id&&(p.id="gradiated-"+m.id),p.style.background=o.background,o.background||(p.style.backgroundColor=o.getPropertyValue("background-color"),p.style.backgroundImage=o.getPropertyValue("background-image")),p.style.position=o.getPropertyValue("position"),p.style.display=o.getPropertyValue("display"),p.style.marginTop=o.getPropertyValue("margin-top"),p.style.marginBottom=o.getPropertyValue("margin-bottom"),p.style.marginRight=o.getPropertyValue("margin-right"),p.style.marginLeft=o.getPropertyValue("margin-left"),p.style["float"]=o.getPropertyValue("float"),n.insertBefore(p,m),p.width=cWidth*ratio,p.height=cHeight*ratio,p.style.width=cWidth+"px",p.style.height=cHeight+"px",ctx.scale(ratio,ratio),ctx.font=o.fontStyle+" "+o.fontVariant+" "+o.fontWeight+" "+o.fontSize+" "+o.fontFamily,"none"!==o.getPropertyValue("text-shadow")){var q=o.textShadow.split(") ");if(q.length>1){ctx.shadowColor=q.shift()+")";var r=q.shift().split(" ");ctx.shadowOffsetX=parseInt(r[0],10)*ratio,ctx.shadowOffsetY=parseInt(r[1],10)*ratio,ctx.shadowBlur=parseInt(r[2],10)*ratio}}ctx.textBaseline="bottom",ctx.textAlign=o.textAlign,navigator.userAgent.indexOf("Safari")>-1&&(ctx.fillStyle=ctx.shadowColor,ctx.fillText(m.textContent,startLeft,stopTop),ctx.shadowColor="transparent"),grad.addColorStop(0,b),grad.addColorStop(1,e),ctx.fillStyle=grad,ctx.fillText(m.textContent,startLeft,stopTop),m.style.position="absolute",m.style.width="1px",m.style.height="1px",m.style.margin="-1px",m.style.padding="0",m.style.overflow="hidden",m.style.clip="rect(0,0,0,0)",m.style.border=0}}}},this.addResizeHandler()};